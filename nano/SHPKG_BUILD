# package name
shpkg_name="GNU Nano"

# package build dependencies
case "${SHPKG_DISTRO}" in
    debian|termux)
        shpkg_build_depends="build-essential"
        ;;
    archlinux)
        shpkg_build_depends="base-devel"
        ;;
    redhat)
        shpkg_build_depends="make automake clang"
        ;;
    alpine)
        shpkg_build_depends="alpine-sdk"
        ;;
    nixos)
        shpkg_build_depends="automake clang"
        ;;
esac

# package source code
shpkg_source="https://www.nano-editor.org/dist/v5/nano-5.7.tar.xz"

# detect distro
case "${SHPKG_DISTRO}" in
    termux)
        INSTALL_PREFIX="${SHPKG_TERMUXROOT}/usr/opt/nano-5.7"
        BINDIR="${SHPKG_TERMUXROOT}/usr/bin"
        ;;
    *)
        INSTALL_PREFIX="/opt/nano-5.7"
        BINDIR="/usr/local/bin"
        ;;
esac

prepare(){
	cd ${SRCDIR}
	./configure --prefix=${INSTALL_PREFIX}
}

build(){
    make -j$(nproc)
}

finish(){
    echo "Installing nano..."
    ${SHPKG_SUDO} make install
    ${SHPKG_SUDO} ln -rs ${INSTALL_PREFIX}/bin/nano ${BINDIR}/shpkg-nano
}

remove(){
	${SHPKG_SUDO} rm -rf ${INSTALL_PREFIX}
    ${SHPKG_SUDO} rm -rf ${BINDIR}/shpkg-nano
}
